<article class="product-detail">
  {# Galería de varias imágenes - New format with objects #}
  {% if images and images.length > 0 %}
    <div class="product-gallery" data-image-count="{{ images.length }}">
      {% for img in images %}
        <div class="gallery-item">
          {% if img.image %}
            {# New format: images array with objects #}
            <img class="product-detail__img" src="{{ img.image }}" alt="{{ img.alt or (title + ' - Imagen ' + loop.index) }}">
          {% else %}
            {# Legacy format: images array with strings #}
            <img class="product-detail__img" src="{{ img }}" alt="{{ title + ' - Imagen ' + loop.index }}">
          {% endif %}
        </div>
      {% endfor %}
    </div>

  {# Imagen única (legacy) #}
  {% elif image %}
    <div class="gallery-item">
      <img class="product-detail__img" src="{{ image }}" alt="{{ title }}">
    </div>
  {% else %}
    <div class="gallery-item">
      <img class="product-detail__img" src="/assets/images/default.jpg" alt="{{ title }}">
    </div>
  {% endif %}

  <h1 class="product-detail__title">{{ title }}</h1>

  {% if price %}
    <p class="product-detail__price">{{ price }}</p>
  {% endif %}

  <div class="product-detail__content">
    {{ content | safe }}
  </div>

  <p>
    <a class="btn-whatsapp" href="https://wa.me/16263941200?text=Hola, me interesa el producto: {{ title }}" target="_blank" rel="noopener">
      Comprar por WhatsApp
    </a>
  </p>
</article>
